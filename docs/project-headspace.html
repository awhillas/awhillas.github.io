<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <title>    Project: Headspace
</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="https://alexander.whillas.com/theme/favicon.ico">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IM Fell English">
        <link href='https://fonts.googleapis.com/css?family=Gentium+Book+Basic|Merriweather:400,300' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://alexander.whillas.com/theme/css/cid.css">
        <link rel="stylesheet" href="https://alexander.whillas.com/theme/css/highlight.css">
        <link href="https://alexander.whillas.com/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="Alexander Whillas Atom Feed" />
        <link href="https://alexander.whillas.com/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="Alexander Whillas RSS Feed" />

        <script src="https://unpkg.com/htmx.org@1.9.11" integrity="sha384-0gxUXCCR8yv9FM2b+U3FDbsKthCI66oH5IA9fHppQq9DDMHuMauqq1ZHBpJxQ0J0" crossorigin="anonymous"></script>

        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-V8WYQX7V0K"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-V8WYQX7V0K');
        </script>
    </head>
    <body hx-boost="true">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

            <div class="container">

<header class="blog-header">
    <h1><a href="https://alexander.whillas.com">Alexander Whillas</a></h1>
    <p></p>
    <nav>
        <a href="https://alexander.whillas.com/">INDEX</a>
        <a href="https://alexander.whillas.com/archives">ARCHIVES</a>
        <a href="https://alexander.whillas.com/categories">CATEGORIES</a>
    </nav>
</header>

    <div class="post">

        <header>
            <h1>Project: Headspace</h1>

            <p class="date">Started
                <em><time datetime="2024-03-31T00:00:00+13:00">Mar 31, 2024</time></em>
; Updated
                    <em>Apr 06, 2024
</em></p>
        </header>

        <article>
            <h1>6th April, 2024 - My Kingdom for a Hypermedia backend!</h1>
<p>I realised that if I&rsquo;m going to the hypermedia route I&rsquo;m going to be doing a lot of backend again like the good old days. It also occurred to me that FastAPI is not really optimised for hypermedia but instead JSON APIs. So ether I go back to <a href="https://flask.palletsprojects.com/">Flask</a> or <a href="https://www.djangoproject.com/">Django</a>, but Django is very heave and mainly for setups with a database as the main driver of the content. I&rsquo;m mainly using the file system(s), until I have to start to manage logins that is, which I should perhaps just think about from the begging since collaboration is going to be a big part of Headspace.</p>
<p>By hypermedia doesn&rsquo;t care what your backend is written in so I was flirting with the idea of using Rust? Most of these opinions I git from <a href="https://www.reddit.com/r/rust/comments/18ogwtl/which_web_framework_do_you_use_in_rust/">a Reddit post</a>.</p>
<ul>
<li>Rust web frameworks:<ul>
<li><a href="https://docs.rs/poem/latest/poem/">Poem</a>: &ldquo;sits somewhere between a focused micro-framework and a full-featured &ldquo;batteries included&rdquo; framework. I like the API design, it uses strong typing well to increase correctness and ergonomics, but without getting too crazy to keep things simple.&rdquo; &amp; &ldquo;it just doesn&rsquo;t get enough love and fast enough bugfixes&rdquo; also &ldquo;hard-to-google name&rdquo;</li>
<li><a href="https://rocket.rs/">Rocket</a>: &ldquo;Rocket is great with all of the bells and whistles but it&rsquo;s heavy use of macros, while it makes things easy, requires you to jump into the documentation more to look up the correct way to do things.&rdquo;</li>
<li><a href="https://docs.rs/axum/latest/axum/">Axum</a> &ldquo;Axum is light and flexible, you can usually guess correctly how to do things without popping into the docs too often because it just works how you&rsquo;d expect. But that is also because how you expect it to work is usually &ldquo;build the thing yourself or use another crate&rdquo;.<ul>
<li><a href="https://loco.rs/">Loco</a> - Loco follows Rails. There, I said it. Rails concepts are carefully adapted to modern Rust development. (I don&rsquo;t like Rails, convention over configuration :@ Try remebering convention after 6 months!)</li>
</ul>
</li>
</ul>
</li>
<li>HTML Templating in Rust:<ul>
<li><a href="https://maud.lambda.xyz/">maud</a>: light weight macro, Pug like, for writing html templates</li>
<li><a href="https://docs.rs/minijinja/latest/minijinja/">minijinja</a> jinja templates in Rust!</li>
</ul>
</li>
</ul>
<p>But I&rsquo;m kidding myself. Using Rust for this will just slow me down&hellip; Flask it is&hellip;</p>
<p>After much consideration I&rsquo;m going to use <a href="https://github.com/candidtim/cookiecutter-flask-minimal/tree/master">cookiecutter-flask-minimal</a> template to start the project. <a href="https://github.com/microsoft/cookiecutter-python-flask-clean-architecture">cookiecutter-python-flask-clean-architecture</a> from Micro$oft looked interesting but I&rsquo;m not sure I want to spend more time on the Onion Architecture and&hellip; well its Micro$oft.</p>
<p>Useful Flask resources:
- <a href="https://www.trackawesomelist.com/mjhea0/awesome-flask/readme/">Awesome Flask</a> just an up-to-date list of useful Flask stuff</p>
<h2>Now using htmx Boosting</h2>
<p>So if you include the htmx CDN file in your page and then turn bosting by putting <code>hx-boost="true"</code> in the body tag of your page all the links on you page go AJaX and your page body is swapped out instead of a page reload. No extra work required!</p>
<h1>4th April, 2024 - The revolution is televised</h1>
<p>Found this great talk that breaks down the kind of API that I want to build which is a <a href="https://8thlight.com/insights/the-hypermedia-maturity-model">Hypermedia Maturity Model</a> level 3 me thinks</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/zM5t6DaYrqM?si=dkAb8PhJP1zngC5B" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<p>Which I found in the videos section of the <a href="https://jtc42.github.io/fastapi-hypermodel/resources/">FastAPI HyperModel resources page</a>.</p>
<h2>htmx?</h2>
<blockquote>
<p>htmx gives you access to AJAX, CSS Transitions, WebSockets and Server Sent Events directly in HTML, using attributes, so you can build modern user interfaces with the simplicity and power of hypertext</p>
</blockquote>
<p>I got a little side tracked with <a href="https://htmx.org/">htmx</a> in combo with this type of hypermedia in which the server is rendering HTML snippets and sending them after in this video. This means ditching React and having simple HTML+HTMLx as the frontend. What gave me pause to seriously consider this was the results of doing this on a <a href="https://www.youtube.com/watch?v=3GObi93tjZI&amp;t=493s&amp;ab_channel=DjangoConEurope">real system</a> or at least their reported stats which look like:</p>
<p><img alt="Refactoring from SPA to hypermedia system" src="https://alexander.whillas.com/images/savings_with_hypermedia.png" />
(From <a href="https://www.youtube.com/watch?v=LwH4ifjt3Y4&amp;ab_channel=DjangoConUS">Back to the Future of Hypermedia in Django with Mario Munoz</a>)</p>
<p>Performance over thousands of elements is a factor (2nd last point above) because its just rendered HTML at the end of the day, which React struggles with. Performance being one of the biggest complaints of Miro. It also seems to reduce the frontend by about 90%, which if your a lone developer is huge!</p>
<p>He also claims that their product velocity has increased dramatically and the team is smaller.</p>
<p>Checkout:</p>
<ul>
<li><a href="https://github.com/PyHAT-stack/awesome-python-htmx">PyHAT: Awesome Python htmx</a> - PyHAT is more than just a snake with a hat üêçü§†. It stands for Python htmx ASGI Tailwind‚Äîa web stack that allows you to build powerful web applications using nothing more than&hellip; drumroll&hellip; Python, htmx, and Tailwind.</li>
<li><a href="https://hypermedia.systems/">Hypermedia Systems</a> book by the htmlx guys with an example using Flask and htmlx and Jinja2 for rendering HTML fragments.</li>
</ul>
<h1>2nd April, 2024 - Hypermodel</h1>
<p>Going to go with a Level 2 hypermodel using <code>[fastapi-hypermodel](https://jtc42.github.io/fastapi-hypermodel/)</code> which is&hellip;</p>
<blockquote>
<p>FastAPI-HyperModel is a FastAPI + Pydantic extension for simplifying hypermedia-driven API development.
Hypermedia consist of enriching API responses by providing links to other <abbr title="Uniform Resource Identifiers">URIs</abbr> within the services to fetch related resources or perform certain actions. There are several levels according to the <a href="https://8thlight.com/insights/the-hypermedia-maturity-model">Hypermedia Maturity Model Levels</a>. Using Hypermedia makes APIs reach Level 3 of the <a href="https://en.wikipedia.org/wiki/Richardson_Maturity_Model">Richardson Maturity Model (RMM)</a>, which involves leveraging <a href="https://en.wikipedia.org/wiki/HATEOAS">Hypertext As The Engine Of Application State (HATEOAS)</a>, that is, Hypermedia.</p>
</blockquote>
<p>This basically allows me to define media types and exposed hyperlinks (<abbr title="Uniform Resource Identifiers">URIs</abbr>) to perform all the actions on those media types. It has the equivalent of HTML forms but in JSON if those actions or mutations need more information. This should allow me to keep the React <abbr title="frontend">FE</abbr> fairly generic which was the idea of the <abbr title="Representational State Transfer">REST</abbr> principles. If I take it all the way to RMM Level 3 it even has all the RDF stuff so people can expose the data to the public and do real linked data.</p>
<h1>1st April, 2024 - No Fooling</h1>
<p>I&rsquo;ve been working on, what I call Headspace<sup id="fnref:headspace"><a class="footnote-ref" href="#fn:headspace">1</a></sup> (working tittle), for about 3 months. I imagine it as a virtual space in which you can organise your ideas, various types of data and interface with AI models on the backend with a click of a button. Kind of a cross between a virtual whiteboard and a database knitted together with RDF metadata.gi</p>
<h2>Brief history of the idea</h2>
<p>I&rsquo;ve had this idea knocking around inside my head for about&hellip; 20 years. At first it wasn&rsquo;t feasible with the <abbr title="State of The Art">SoTA</abbr><sup id="fnref:sota"><a class="footnote-ref" href="#fn:sota">2</a></sup> in frontend development being JQuery and SVG being a standard that perhaps one browser supported (Flash was what everyone was using for vector graphics).</p>
<h2><abbr title="Representational State Transfer">REST</abbr> is HATEOAS?</h2>
<p>I&rsquo;ve known about <a href="https://en.wikipedia.org/wiki/REST"><abbr title="Representational State Transfer">REST</abbr></a>ful APIs for awhile, or at least I thought I did. <abbr title="Representational State Transfer">REST</abbr> actually has a few constraints, according to its originator <a href="https://en.wikipedia.org/wiki/Roy_Fielding">Roy Fielding</a> in his <a href="https://ics.uci.edu/~fielding/pubs/dissertation/top.htm">PhD thesis</a> (he gets to the crunch in chapter 5 and 6), that are about long term think:</p>
<blockquote>
<p><abbr title="Representational State Transfer">REST</abbr> is software design on the scale of decades: every detail is intended to promote software longevity and independent evolution. Many of the constraints are directly opposed to short-term efficiency. Unfortunately, people are fairly good at short-term design, and usually awful at long-term design. - <a href="https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven">cite</a></p>
</blockquote>
<p>So <a href="https://en.wikipedia.org/wiki/HATEOAS#:~:text=Hypermedia%20as%20the%20engine%20of,provide%20information%20dynamically%20through%20hypermedia.">Hypertext as The Engine of Application State</a> (HaTEoAS) &ldquo;is a constraint of the <abbr title="Representational State Transfer">REST</abbr> application architecture that distinguishes it from other network application architectures.&rdquo; according to Roy Fielding its creator, which he outlines in his doctorial thesis. This gives us</p>
<blockquote>
<p>The strong decoupling of client and server together with the text-based transfer of information using a uniform addressing protocol provided the basis for meeting the requirements of the Web: robustness (anarchic scalability), independent deployment of components, large-grain data transfer, and a low entry-barrier for content readers, content authors and developers alike.</p>
</blockquote>
<p>So the long and short of it is: have hyperlinks (<abbr title="Uniform Resource Identifiers">URIs</abbr> related to the thing/data you are looking at) accompany media. These <abbr title="Uniform Resource Identifiers">URIs</abbr> are for navigating and mutating the state of the media you are looking at. The links can be labelled with relations. The only problems with this last part is that those are domain specific and so you need a human to interpret them, well until <abbr title="Large Language Models, i.e ChatGPT, M$'s Copilot etc">LLM</abbr>. There has been an attempt to make some standard relations. But this is all good as this is exactly what I need for Headspace as the relations need only have good human readable descriptions for the React client/frontend/Code-on-Demand to display to the user, and these relations are going to be different of each media type, as Mr Fielding intended!</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:headspace">
<p>Yes I&rsquo;m aware of the mental health app and the Australia‚Äôs National Youth Mental Health Foundation, thanks. Its not related to mental health.&#160;<a class="footnote-backref" href="#fnref:headspace" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:sota">
<p>hey, there are no real rules to acronym capitalisation or even what makes the acronym i.e. &lsquo;for&rsquo; is randomly dropped such as in FBI. I&rsquo;m going with Proper Nouns (PN) get capitalised (&lsquo;the&rsquo; is part of the PN) and everything else is lowercase&#160;<a class="footnote-backref" href="#fnref:sota" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:cod">
<p><a href="https://en.wikipedia.org/wiki/Code_on_demand">Code on Demand</a> seems to be the old way of saying &ldquo;frontend&rdquo;?&#160;<a class="footnote-backref" href="#fnref:cod" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
        </article>

        <footer>
            <p>This entry is posted in:
                    <a href="https://alexander.whillas.com/category/software-engineering.html">Software Engineering</a>
            </p>
        </footer>


    </div>


<footer class="blog-footer">

    <ul class="nav">
            <li><a href="https://twitter.com/awhillas">Twitter</a></li>
            <li><a href="https://github.com/awhillas">Github</a></li>
            <li><a href="https://www.linkedin.com/in/whillas/">Linkedin</a></li>
        <li><a rel="me" href="https://mastodon.social/@whillas">Mastodon</a></li>
    </ul>

    <p class="disclaimer">
    Built with <a href="http://getpelican.com">Pelican</a>, and <a href="https://github.com/hdra/Pelican-Cid">Cid</a> theme.<br />
    <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.

    </p>

</footer>
            </div>
    </body>
</html>